<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="preload" href="https://get.mavo.io/mavo.css" as="style">
    <link rel="preload" href="https://fonts.googleapis.com/css?family=Architects+Daughter" as="style">
    <link rel="preload" href="https://unpkg.com/wired-elements@latest/dist/wired-elements.bundled.min.js" as="script">
    <link rel="preload" href="https://get.mavo.io/mavo.js" as="script">

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://get.mavo.io/mavo.css" />
    <link href="https://fonts.googleapis.com/css?family=Architects+Daughter" rel="stylesheet">
    <script src="https://get.mavo.io/mavo.js"></script>
    <title>Prototype Activity Mapping</title>
    <script src="https://unpkg.com/wired-elements@latest/dist/wired-elements.bundled.min.js"></script>
    <style>
        :root {
            font-family: 'Architects Daughter', cursive;
            font-size: 18px;
            --gap: 18px;
            --halfGap: calc(var(--gap) / 2);
            --mainOffset: 5em;
        }

        html {
            box-sizing: border-box;
        }

        *,
        *:before,
        *:after {
            box-sizing: inherit;
        }

        body,
        main {
            margin: 0;
            padding: 0;
            position: absolute;
        }

        body {
            overflow: hidden;
            height: 100%;
            width: 100%;
        }

        main {
            overflow: scroll;
            height: calc(100% - var(--mainOffset) - var(--gap));
            width: 100%;
            margin-top: var(--gap);
            z-index: 1;
        }

        header {
            height: var(--mainOffset);
            padding: var(--gap);
            z-index: 0;
        }

        .mv-bar {
            display: block;
            padding: var(--gap);
        }

        [mv-mode='edit'] .mv-edit {
            background-color: rgba(131, 151, 151, 0.58)
        }

        .mv-bar .toolbar-btn {
            margin-left: var(--halfGap);
            float: right;
            min-width: 55px;
        }

        .activities {
            display: grid;
            grid-template-columns: repeat(auto-fill, auto);
            grid-template-rows: minmax(auto, 1000px);
            grid-gap: var(--gap);
            justify-content: start;
            background-color: #fff;
            color: #444;
            max-width: 1000vw;
            padding: var(--gap);
            margin: 0;
            top: 0;
            left: 0;
            bottom: 0;
            position: absolute;
        }

        .card {
            display: block;
            width: 280px;
            min-height: 140px;
            padding: var(--halfGap);
        }

        .card-index {
            text-align: right;
        }

        .card-role {
            display: block;
            float: left;
            background-color: #444;
            color: whitesmoke;
            padding-left: 4px;
            padding-right: 4px;
        }

        .card-label {
            font-weight: bold;
        }

        .card-property-editor {
            background-color: aliceblue;
        }

        [mv-mode='edit'] .card-property-editor--enum:after {
            content: 'â–¼';
            font-weight: bold;
            transform: scale(2, 0.5);
            break-before: never;
        }

        .activity {
            display: grid;
            grid-template-columns: repeat(auto-fill, auto);
            grid-gap: var(--gap);
            padding: 0;
            margin: 0;
            grid-row-start: 1;
            grid-row-end: 2;
            width: fit-content;
            height: fit-content;
            justify-content: start;
        }

        .card--activity {
            grid-row-start: 1;
            grid-row-end: 2;
            background-color: rgba(63, 127, 191, 0.2);
        }

        .action {
            display: grid;
            grid-gap: var(--gap);
            padding: 0;
            margin: 0;
            grid-row-start: 2;
            grid-row-end: 3;
            width: fit-content;
            height: fit-content;
            justify-content: start;
        }

        .card--action {

            background-color: rgba(191, 63, 191, 0.2);
        }

        .operation {
            display: grid;
            grid-gap: var(--gap);
            padding: 0;
            margin: 0;
            grid-column-start: 1;
            grid-column-end: 2;
            width: fit-content;
            height: auto;
        }

        .conditions {
            display: none;
            margin-bottom: var(--halfGap);
        }

        .condition {
            margin-bottom: var(--halfGap);
            display: list-item;
            list-style: inside decimal;
        }

        wired-radio[aria-checked='1']+.conditions {
            display: block;
        }

        .card--operation {
            background-color: rgba(243, 247, 22, 0.582)
        }

        .activities>button.mv-add {
            grid-row-start: 1;
            grid-row-end: 2;
        }

        .activity>button.mv-add {
            grid-row-start: 2;
            grid-row-end: 3;
        }

        .mv-add {
            max-width: 150px;
            min-width: 120px;
            max-height: 50px;
            min-height: 40px;
            background: #fff;
            font-family: 'Architects Daughter', cursive;
            font-size: 18px;
            border: 1.5px solid #020202a2;
        }

        wired-radio {
            font-weight: bold;
            margin-top: var(--halfGap);
            transform: scale(0.8,0.8);
        }
    </style>
</head>

<body mv-app="ActivityMap" mv-storage="local">
    <div hidden>
        <select id="roles">
            <option value="student">student</option>
            <option value="teacher">teacher</option>
            <option value="editor">editor</option>
        </select>
        <select id="activity-intenttypes">
            <option value="want-to">want to</option>
            <option value="have-to">have to</option>
            <option value="need-to">need to</option>
        </select>
        <select id="action-intenttypes">
            <option value="need-to">need to</option>
            <option value="should">should</option>
            <option value="have-to">have to</option>
            <option value="want-to">want to</option>
        </select>
        <select id="operation-intenttypes">
            <option value="must">must</option>
            <option value="should">should</option>
            <option value="may">may</option>
        </select>
        <select id="operation-conditiontypes">
            <option value="given">given</option>
            <option value="when">when</option>
            <option value="then">then</option>
            <option value="and">and</option>
        </select>
    </div>
    <header>
        <wired-card class="mv-bar">
            <span style="font-size: 1.7em; font-weight: bold; line-height: 1em;">Prototype Activity Mapping</span>
            <wired-button class="toolbar-btn mv-edit">edit</wired-button>
            <wired-button class="toolbar-btn mv-save">save</wired-button>
            <wired-button class="toolbar-btn mv-export">export</wired-button>
        </wired-card>
    </header>
    <main>
        <div class="activities">
            <div class="activity" property mv-multiple>
                <meta property name="activityid" content="[$index + 1]" hidden>
                <meta property name="summary" content="As a/an [role] I [intenttype] [activity_verbal] so [motive]." hidden>
                <wired-card class="card card--activity">
                    <div class="card-index">Activity: [activityid]</div>
                    <div property="label" class="card-label"></div>
                    <div class="card-description">As a/an
                        <span class="card-property-editor card-property-editor--enum" property="role" mv-edit="#roles"></span>
                        I
                        <span class="card-property-editor card-property-editor--enum" property="intenttype" mv-edit="#activity-intenttypes"></span>
                        <span class="card-property-editor" property="activity_verbal"></span> so
                        <span class="card-property-editor" property="motive"></span>
                        .
                    </div>
                </wired-card>
                <div class="action" property mv-multiple>
                    <meta property name="actionid" content="[activityid].[$index + 1]" hidden>
                    <meta property name="summary" content="As part of '[activity_verbal]', I [intenttype] [action_verbal] so [goal]." hidden>
                    <wired-card class="card card--action">
                        <div class="card-index"><span class="card-role">[role]</span>Action: [actionid]</div>
                        <div class="card-description">As part of 
                            "<span>[activity_verbal]</span>", I
                            <span class="card-property-editor card-property-editor--enum" property="intenttype" mv-edit="#action-intenttypes"></span>
                            <span class="card-property-editor" property="action_verbal"></span> so
                            <span class="card-property-editor" property="goal"></span>
                            .
                        </div>
                    </wired-card>
                    <div class="operation" property mv-multiple>
                        <meta property name="operationid" content="[actionid].[$index + 1]" hidden>
                        <meta property name="summary" content="In order to '[action_verbal]' I [intenttype] [operation_verbal]." hidden>
                        <wired-card onclick="this.requestRender()" class="card card--operation">
                            <div class="card-index"><span class="card-role">[role]</span>Operation: [operationid]</div>
                            <div class="card-description">In order to 
                                "<span>[action_verbal]</span>", I
                                <span class="card-property-editor card-property-editor--enum" property="intenttype" mv-edit="#operation-intenttypes"></span>
                                <span class="card-property-editor" property="operation_verbal"></span>
                                .
                            </div>
                            <wired-radio text="Show testable conditions"></wired-radio>
                            <div class="conditions">
                                <div property class="condition" mv-multiple mv-default="given, when, then">
                                    <span class="card-property-editor card-property-editor--enum" property="conditionttype" mv-edit="#operation-conditiontypes"></span>
                                    <span class="card-property-editor" property="criteria"></span>
                                </div>
                            </div>
                        </wired-card>
                    </div>
                </div>
            </div>
        </div>
    </main>
</body>

</html>